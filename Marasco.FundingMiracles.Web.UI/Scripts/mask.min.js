"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{"9":/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(n){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=n;return function(n,i,r,u){function lt(n){return angular.isDefined(n)?(gt(n),!c)?ht():(pt(),wt(),!0):ht()}function at(n){angular.isDefined(n)&&(s=n,c&&l())}function vt(n){return c?(f=y(n||""),o=it(f),u.$setValidity("mask",o),o&&f.length?p(f):undefined):n}function yt(n){return c?(f=y(n||""),o=it(f),u.$viewValue=f.length?p(f):"",u.$setValidity("mask",o),f===""&&u.$error.required!==undefined&&u.$setValidity("required",!1),o?f:undefined):n}function ht(){return c=!1,bt(),angular.isDefined(ot)?i.attr("placeholder",ot):i.removeAttr("placeholder"),angular.isDefined(st)?i.attr("maxlength",st):i.removeAttr("maxlength"),i.val(u.$modelValue),u.$viewValue=u.$modelValue,!1}function pt(){f=nt=y(u.$modelValue||"");d=g=p(f);o=it(f);var n=o&&f.length?d:"";r.maxlength&&i.attr("maxlength",e[e.length-1]*2);i.attr("placeholder",s);i.val(n);u.$viewValue=n}function wt(){a||(i.bind("blur",ct),i.bind("mousedown mouseup",w),i.bind("input keyup click focus",l),a=!0)}function bt(){a&&(i.unbind("blur",ct),i.unbind("mousedown",w),i.unbind("mouseup",w),i.unbind("input",l),i.unbind("keyup",l),i.unbind("click",l),i.unbind("focus",l),a=!1)}function it(n){return n.length?n.length>=k:!0}function y(n){var i="",t=b.slice();return n=n.toString(),angular.forEach(et,function(t){n=n.replace(t,"")}),angular.forEach(n.split(""),function(n){t.length&&t[0].test(n)&&(i+=n,t.shift())}),i}function p(n){var t="",i=e.slice();return angular.forEach(s.split(""),function(r,u){n.length&&u===i[0]?(t+=n.charAt(0)||"_",n=n.substr(1),i.shift()):t+=r}),t}function kt(n){var t=r.placeholder;return typeof t!="undefined"&&t[n]?t[n]:"_"}function dt(){return s.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function gt(n){var t=0,i,r;e=[];b=[];s="";typeof n=="string"&&(k=0,i=!1,r=n.split(""),angular.forEach(r,function(n,r){h.maskDefinitions[n]?(e.push(t),s+=kt(r),b.push(h.maskDefinitions[n]),t++,i||k++):n==="?"?i=!0:(s+=n,t++)}));e.push(e.slice().pop()+1);et=dt();c=e.length>1?!0:!1}function ct(){tt=0;v=0;o&&f.length!==0||(d="",i.val(""),n.$apply(function(){u.$setViewValue("")}))}function w(n){n.type==="mousedown"?i.bind("mouseout",rt):i.unbind("mouseout",rt)}function rt(){v=ft(this);i.unbind("mouseout",rt)}function l(t){var f,s,it;if(t=t||{},f=t.which,s=t.type,f!==16&&f!==91){var c=i.val(),w=g,b,o=y(c),lt=nt,rt=!1,r=ni(this)||0,et=tt||0,ot=r-et,h=e[0],l=e[o.length]||e.slice().shift(),a=v||0,at=ft(this)>0,st=a>0,ht=c.length>w.length||a&&c.length>w.length-a,k=c.length<w.length||a&&c.length===w.length-a,vt=f>=37&&f<=40&&t.shiftKey,yt=f===37,ct=f===8||s!=="keyup"&&k&&ot===-1,pt=f===46||s!=="keyup"&&k&&ot===0&&!st,d=(yt||ct||s==="click")&&r>h;if(v=ft(this),!vt&&(!at||s!=="click"&&s!=="keyup")){if(s==="input"&&k&&!st&&o===lt){while(ct&&r>h&&!ut(r))r--;while(pt&&r<l&&e.indexOf(r)===-1)r++;it=e.indexOf(r);o=o.substring(0,it)+o.substring(it+1);rt=!0}for(b=p(o),g=b,nt=o,i.val(b),rt&&n.$apply(function(){u.$setViewValue(o)}),ht&&r<=h&&(r=h+1),d&&r--,r=r>l?l:r<h?h:r;!ut(r)&&r>h&&r<l;)r+=d?-1:1;(d&&r<l||ht&&!ut(et))&&r++;tt=r;ti(this,r)}}}function ut(n){return e.indexOf(n)>-1}function ni(n){if(!n)return 0;if(n.selectionStart!==undefined)return n.selectionStart;if(document.selection){n.focus();var t=document.selection.createRange();return t.moveStart("character",-n.value.length),t.text.length}return 0}function ti(n,t){if(!n)return 0;if(n.offsetWidth!==0&&n.offsetHeight!==0)if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",t);i.select()}}function ft(n){return n?n.selectionStart!==undefined?n.selectionEnd-n.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var c=!1,a=!1,e,b,s,et,k,f,d,o,ot=r.placeholder,st=r.maxlength,g,nt,tt,v,h={};r.uiOptions?(h=n.$eval("["+r.uiOptions+"]"),angular.isObject(h[0])&&(h=function(n,t){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]?angular.extend(t[i],n[i]):t[i]=angular.copy(n[i]));return t}(t,h[0]))):h=t;r.$observe("uiMask",lt);r.$observe("placeholder",at);u.$formatters.push(vt);u.$parsers.push(yt);i.bind("mousedown mouseup",w);Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var u,r,t,i;if(this===null)throw new TypeError;if((u=Object(this),r=u.length>>>0,r===0)||(t=0,arguments.length>1&&(t=Number(arguments[1]),t!==t?t=0:t!==0&&t!==Infinity&&t!==-Infinity&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);i<r;i++)if(i in u&&u[i]===n)return i;return-1})}}}}]);
//# sourceMappingURL=mask.min.js.map
