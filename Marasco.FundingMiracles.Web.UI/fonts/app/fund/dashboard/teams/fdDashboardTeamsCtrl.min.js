"use strict";fundoloApp.controller("fdDashboardTeamsCtrl",["$scope","$stateParams","$modal","$location","$log","$timeout","fdDashboardSvc",function(n,t,i,r,u,f,e){e.summary(t.fundId).then(function(t){n.fund=angular.isArray(t)?t[0]:t;n.isLoading=!1;App.mallDub.setDomainColor(n.fund.pageColor,n.fund.pageSkin,n.fund.pageLayout)},function(t){toastr.error("Problem getting donations","There was a problem accessing your donations.  Please try again");u.error(t);n.isLoading=!1});n.showWarning=!1;n.isLoading=!0;var o;n.openTeam=function(t){var r=i.open({templateUrl:"/app/fund/dashboard/teams/fdDashboardTeamsCtrlCreateMdl.min.html",controller:ModalCreateTeamCtlr,size:"sm-med",backdrop:"static",resolve:{fund:function(){return angular.isDefined(t)?t.fund:undefined},team:function(){return t}}});r.result.then(function(t){t.isEdit||(t.name=t.team.name,t.dateEntered=t.team.dateEntered,n.fund.teamList.push(t))},function(){u.info("Modal dismissed at: "+new Date)})};n.openTeamFund=function(n){r.path("/fund/dashboard/"+n.teamFundId)};n.getProgressPercentage=function(){return{width:"65%"}};n.$on("destroy",function(){f.cancel(o)})}]);var ModalCreateTeamCtlr=["$scope","$modalInstance","$filter","fdDashboardSvc","fund","team",function(n,t,i,r,u,f){n.isSaving=!1;n.fund=u||{};n.fundTeam=angular.isUndefined(f)?{fundId:n.fund.identification,team:{}}:f;n.isEdit=angular.isDefined(n.fundTeam.teamId&&n.fundTeam.teamId>0);n.team=angular.copy(f);n.ok=function(){this.createTeamForm.$valid&&(n.isSaving=!0,r.saveFundTeam(n.fundTeam).then(function(i){var r=n.isEdit?"updated":"created";toastr.success("Team "+r+" successfully");i.isEdit=n.isEdit;t.close(i);n.isSaving=!1},function(){toastr.error("Oops!  Problem saving team","There were some problems saving the new team.  Please try again");n.isSaving=!1}))};n.cancel=function(i){n.isEdit&&(n.fundTeam.team.name=n.team.team.name,n.fundTeam.captainEmail=n.team.captainEmail,n.fundTeam.goalAmount=n.team.goalAmount);t.dismiss(i)}}];
//# sourceMappingURL=fdDashboardTeamsCtrl.min.js.map
