"use strict";fundoloApp.controller("fdDashboardSettingsCtrl",["$scope","$stateParams","$window","$location","$log","$timeout","fdDashboardSvc",function(n,t,i,r,u,f,e){function l(t,i){switch(t){case"email":n.isSavingEmail=i;break;case"facebook":n.isSavingFacebook=i;break;case"config":n.isSavingConfig=i}}function c(t,i){switch(t){case"email":n.emailButtonTitle=i?o:s;break;case"facebook":n.facebookButtonTitle=i?o:s;break;case"config":n.configButtonTitle=i?o:s}}var o="Turn On All",s="Turn Off All",h;e.summary(t.fundId).then(function(t){n.fund=angular.isArray(t)?t[0]:t;n.isLoading=!1;App.mallDub.setDomainColor(n.fund.pageColor,n.fund.pageSkin,n.fund.pageLayout)},function(t){toastr.error("Problem getting donations","There was a problem accessing your donations.  Please try again");u.error(t);n.isLoading=!1});n.showWarning=!1;n.isLoading=!0;n.isSavingEmail=!1;n.isSavingFacebook=!1;n.isSavingConfig=!1;n.isSavingStatus=!1;n.emailTurnOn=!0;n.facebookTurnOn=!0;n.configTurnOn=!0;n.emailButtonTitle=o;n.facebookButtonTitle=o;n.configButtonTitle=o;n.updateStatus=function(t){n.isSavingStatus=!0;e.status(n.fund.identification,t).then(function(){h=f(function(){n.isSavingStatus=!1},2e3)},function(){toastr.error("Uh oh.  There is a problem changing the status.  Please refresh and try again.");n.isSavingStatus=!1})};n.updateSettings=function(t){l(t,!0);e.saveFundSettings(n.fund.settings).then(function(){toastr.success("Setting updated successfully");h=f(function(){l(t,!1)},2e3)},function(){toastr.error("There was an issue saving the settings.  Please refresh and try again")})};n.updateSettingsGroup=function(t){switch(t){case"email":n.fund.settings.emailReceiveUserDonation=n.emailTurnOn;n.fund.settings.emailSendSupporter25Raised=n.emailTurnOn;n.fund.settings.emailReceiveUserSupport=n.emailTurnOn;n.fund.settings.emailSendSupporter50Raised=n.emailTurnOn;n.fund.settings.emailReceiveUserFundraiser=n.emailTurnOn;n.fund.settings.emailSendSupporter75Raised=n.emailTurnOn;n.fund.settings.emailReceiveUserTeamMember=n.emailTurnOn;n.fund.settings.emailSendSupporterFriendSupport=n.emailTurnOn;n.emailTurnOn=!n.emailTurnOn;c(t,n.emailTurnOn);break;case"facebook":n.fund.settings.facebookPostAddVideo=n.facebookTurnOn;n.fund.settings.facebookPostUserSupport=n.facebookTurnOn;n.fund.settings.facebookPostAddImage=n.facebookTurnOn;n.fund.settings.facebookPostUserDonate=n.facebookTurnOn;n.fund.settings.facebookPostUpdate=n.facebookTurnOn;n.fund.settings.facebookPostUserFundraiser=n.facebookTurnOn;n.facebookTurnOn=!n.facebookTurnOn;c(t,n.facebookTurnOn);break;case"config":n.fund.settings.allowAnonymousDonors=n.configTurnOn;n.fund.settings.allowCommenting=n.configTurnOn;n.fund.settings.allowRecuringPayments=n.configTurnOn;n.fund.settings.usePaymentModal=n.configTurnOn;n.configTurnOn=!n.configTurnOn;c(t,n.configTurnOn)}n.updateSettings(t)};n.$on("destroy",function(){f.cancel(h)})}]);
//# sourceMappingURL=fdDashboardSettingsCtrl.min.js.map
